(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[483],{6604:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/members",function(){return t(5055)}])},5554:function(e,n,t){"use strict";t.d(n,{RP:function(){return r},a$:function(){return a},zs:function(){return l}});let r=[{value:1,label:"Za\xf1artu"},{value:2,label:"Oro Verde"},{value:3,label:"El Parron"},{value:4,label:"La Hermosa"},{value:5,label:"Malloa Norte"},{value:6,label:"Malloa Sur"},{value:7,label:"Huape"},{value:8,label:"Quinchamali"},{value:9,label:"Confluencia"}],a=[{value:"Soltero(a)",label:"Soltero(a)"},{value:"Casado(a)",label:"Casado(a)"},{value:"Divorciado(a)",label:"Divorciado(a)"},{value:"Viudo(a)",label:"Viudo(a)"}],l=[{value:"1",label:"Activo"},{value:"2",label:"No Activo"},{value:"3",label:"Transferido"},{value:"4",label:"Retirado"},{value:"5",label:"Fallecido"}]},4982:function(e,n,t){"use strict";t.d(n,{c:function(){return a}});var r=t(7294);let a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[n,t]=(0,r.useState)([]);(0,r.useEffect)(()=>{t([])},[e]);let a=(0,r.useCallback)(()=>{t([...e])},[e]),l=(0,r.useCallback)(e=>{t(n=>[...n,e])},[]),s=(0,r.useCallback)(()=>{t([])},[]),i=(0,r.useCallback)(e=>{t(n=>n.filter(n=>n!==e))},[]);return{handleDeselectAll:s,handleDeselectOne:i,handleSelectAll:a,handleSelectOne:l,selected:n}}},5055:function(e,n,t){"use strict";t.r(n);var r=t(5893),a=t(7294),l=t(9008),s=t.n(l),i=t(1664),o=t.n(i),c=t(8005),u=t(6822),d=t(1214),h=t(6216),m=t(5861),g=t(9417),x=t(3219),b=t(6886),f=t(6515),v=t(431),p=t(4982),j=t(8334),Z=t(3826),P=t(8536),S=t(5910),C=t(2077),w=t(6445),M=t(5554);let D=(e,n,t)=>(0,a.useMemo)(()=>(0,P.i)(t,e,n),[e,n,t]),$=e=>(0,a.useMemo)(()=>e.map(e=>e.rut),[e]),_=()=>{let[e,n]=(0,a.useState)(!1),[t,l]=(0,a.useState)([]),[i,j]=(0,a.useState)(0),[P,_]=(0,a.useState)(8),[I,O]=(0,a.useState)(0),[E,N]=(0,a.useState)(0),[k,{data:y,loading:T,error:A}]=(0,S.t)(w.BP,{fetchPolicy:"no-cache",variables:{churchId:E,typeMember:I}});(0,a.useEffect)(()=>{k({variables:{churchId:E,typeMember:I}})},[I,E,k]),(0,a.useEffect)(()=>{if(y){var e;l((null==y?void 0:null===(e=y.Member)||void 0===e?void 0:e.getAll)||[])}},[y]),(0,a.useEffect)(()=>{e&&(k({variables:{churchId:E,typeMember:I}}),n(!1))},[e,k,E,I]);let R=D(i,P,t),U=$(R),F=(0,p.c)(U),W=(0,a.useCallback)((e,n)=>{j(n)},[]),L=(0,a.useCallback)(e=>{_(parseInt(e.target.value,10))},[]);return T?(0,r.jsx)(C.Z,{}):A?(0,r.jsx)("p",{children:"Error loading members"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s(),{children:(0,r.jsx)("title",{children:"Miembros"})}),(0,r.jsx)(u.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,r.jsx)(d.Z,{maxWidth:"xl",children:(0,r.jsxs)(h.Z,{spacing:3,children:[(0,r.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",spacing:4,children:[(0,r.jsx)(h.Z,{spacing:1,children:(0,r.jsx)(m.Z,{variant:"h4",children:"Miembros"})}),(0,r.jsx)("div",{children:(0,r.jsxs)(g.Z,{color:"primary",component:o(),href:"/members/register",variant:"contained",children:[(0,r.jsx)(x.Z,{fontSize:"small",children:(0,r.jsx)(c.Z,{})}),"Nuevo Miembro"]})})]}),(0,r.jsx)(u.Z,{sx:{m:-1.5},children:(0,r.jsxs)(b.ZP,{container:!0,spacing:4,children:[(0,r.jsx)(b.ZP,{item:!0,xs:12,md:3,children:(0,r.jsxs)(f.Z,{fullWidth:!0,label:"Tipo de Miembro",name:"typeMember",select:!0,onChange:e=>{O(parseInt(e.target.value,10))},value:I,children:[(0,r.jsx)(v.Z,{value:0,children:"Todos"}),(0,r.jsx)(v.Z,{value:1,children:"Miembros Probando"}),(0,r.jsx)(v.Z,{value:2,children:"Miembros Plena"}),(0,r.jsx)(v.Z,{value:3,children:"Menores de 13 a\xf1os"})]})}),(0,r.jsx)(b.ZP,{item:!0,xs:12,md:3,children:(0,r.jsxs)(f.Z,{fullWidth:!0,label:"Iglesia",name:"churchId",select:!0,onChange:e=>{N(parseInt(e.target.value,10))},value:E,children:[(0,r.jsx)(v.Z,{value:0,children:"Todos"}),M.RP.map(e=>(0,r.jsx)(v.Z,{value:e.value,children:e.label},e.value))]})})]})}),(0,r.jsx)(Z.d,{count:t.length,items:R,onDeselectAll:F.handleDeselectAll,onDeselectOne:F.handleDeselectOne,onPageChange:W,onRowsPerPageChange:L,onSelectAll:F.handleSelectAll,onSelectOne:F.handleSelectOne,page:i,rowsPerPage:P,selected:F.selected,loading:e,setLoading:n})]})})})]})};_.getLayout=e=>(0,r.jsx)(j.A,{children:e}),n.default=_},3826:function(e,n,t){"use strict";t.d(n,{d:function(){return M}});var r=t(5893),a=t(5697),l=t.n(a),s=t(1664),i=t.n(s),o=t(6242),c=t(6822),u=t(7906),d=t(3184),h=t(3816),m=t(8102),g=t(295),x=t(6216),b=t(9661),f=t(5861),v=t(9417),p=t(1589),j=t(2377);let Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/\s+/," ").split(" ").slice(0,2).map(e=>e&&e[0].toUpperCase()).join("")};var P=t(7957);t(1163);var S=t(8364),C=t(319),w=t(8884);let M=e=>{let{count:n=0,items:t=[],onDeselectAll:a,onDeselectOne:l,onPageChange:s=()=>{},onRowsPerPageChange:M,onSelectAll:D,onSelectOne:$,page:_=0,rowsPerPage:I=0,selected:O=[],setLoadingDelete:E=()=>{}}=e;O.length>0&&(O.length,t.length),t.length>0&&(O.length,t.length);let[N,{data:k,loading:y,error:T}]=(0,C.D)(w.aO),A=e=>(E(y),()=>{N({variables:{rut:e}})});function R(e){let n=new Date(e),t=String(n.getUTCDate()).padStart(2,"0"),r=String(n.getUTCMonth()+1).padStart(2,"0"),a=n.getUTCFullYear();return"".concat(t,"-").concat(r,"-").concat(a)}return(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(j.L,{children:(0,r.jsx)(c.Z,{sx:{minWidth:1200},mb:{minWidth:2200},lg:{minWidth:2200},children:(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(d.Z,{children:(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(m.Z,{children:"Nombre"}),(0,r.jsx)(m.Z,{children:"Direcci\xf3n"}),(0,r.jsx)(m.Z,{children:"Tel\xe9fono"}),(0,r.jsx)(m.Z,{children:"Fecha Nacimiento"}),(0,r.jsx)(m.Z,{children:"Fecha Probando"}),(0,r.jsx)(m.Z,{children:"Fecha Plena"}),(0,r.jsx)(m.Z,{children:"Editar / Borrar"})]})}),(0,r.jsx)(g.Z,{children:t.map(e=>{let n=O.includes(e.rut);return(0,r.jsxs)(h.Z,{hover:!0,selected:n,children:[(0,r.jsx)(m.Z,{children:(0,r.jsxs)(x.Z,{alignItems:"center",direction:"row",spacing:2,children:[(0,r.jsx)(b.Z,{src:"Masculino"===e.sexo?"/assets/avatars/hombre.png":"/assets/avatars/mujer.png",children:Z(e.name)}),(0,r.jsxs)(f.Z,{variant:"subtitle2",children:[null==e?void 0:e.names," ",e.lastNameDad," ",e.lastNameMom]})]})}),(0,r.jsx)(m.Z,{children:null==e?void 0:e.address}),(0,r.jsxs)(m.Z,{children:["+56 ",e.mobile]}),(0,r.jsx)(m.Z,{children:R(null==e?void 0:e.dateOfBirth)}),(0,r.jsx)(m.Z,{children:(null==e?void 0:e.probationStartDate)?R(null==e?void 0:e.probationStartDate):""}),(0,r.jsx)(m.Z,{children:(null==e?void 0:e.fullMembershipDate)?R(null==e?void 0:e.fullMembershipDate):""}),(0,r.jsxs)(m.Z,{children:[(0,r.jsx)(v.Z,{size:"large",startIcon:(0,r.jsx)(P.Z,{style:{marginRight:"-9px"}}),variant:"contained",component:i(),href:"/members/edit?rut=".concat(e.rut)})," ",(0,r.jsx)(v.Z,{size:"large",position:"center",color:"error",startIcon:(0,r.jsx)(S.Z,{style:{marginRight:"-9px"}}),variant:"contained",component:i(),href:"/members",onClick:A(e.rut)})]})]},e.rut)})})]})})}),(0,r.jsx)(p.Z,{component:"div",count:n,onPageChange:s,onRowsPerPageChange:M,page:_,rowsPerPage:I,rowsPerPageOptions:[8,15,25]})]})};M.propTypes={count:l().number,items:l().array,onDeselectAll:l().func,onDeselectOne:l().func,onPageChange:l().func,onRowsPerPageChange:l().func,onSelectAll:l().func,onSelectOne:l().func,page:l().number,rowsPerPage:l().number,selected:l().array,setLoadingDelete:l().func}},8884:function(e,n,t){"use strict";t.d(n,{$Z:function(){return u},aO:function(){return d},oj:function(){return m},rn:function(){return h}});var r=t(2729),a=t(3357);function l(){let e=(0,r._)(["\n    mutation Create($member: MemberInput!) {\n  Member {\n    create(member: $member) {\n      code\n      message\n    }\n  }\n}\n\n"]);return l=function(){return e},e}function s(){let e=(0,r._)(["\n    mutation Update($updateId: ID!, $rut: ID!, $username: String, $email: String, $password: String) {\n  User {\n    update(id: $updateId, rut: $rut, username: $username, email: $email, password: $password) {\n      code\n      message\n    }\n  }\n}"]);return s=function(){return e},e}function i(){let e=(0,r._)(["\nmutation Delete($rut: String!) {\n  Member {\n    delete(rut: $rut) {\n      code\n      message\n    }\n  }\n}"]);return i=function(){return e},e}function o(){let e=(0,r._)(["\nmutation Update($member: MemberInput!) {\n    Member {\n        update(member: $member) {\n        code\n        message\n        }\n    }\n}"]);return o=function(){return e},e}function c(){let e=(0,r._)(["\nmutation ChangePassword($id: ID!, $password: String!) {\n  User {\n    changePassword(id: $id, password: $password) {\n      code\n      message\n    }\n  }\n}"]);return c=function(){return e},e}let u=(0,a.Ps)(l());(0,a.Ps)(s());let d=(0,a.Ps)(i()),h=(0,a.Ps)(o()),m=(0,a.Ps)(c())},8536:function(e,n,t){"use strict";function r(e,n,t){return e.slice(n*t,n*t+t)}t.d(n,{i:function(){return r}})}},function(e){e.O(0,[157,116,690,709,703,515,71,556,886,334,774,888,179],function(){return e(e.s=6604)}),_N_E=e.O()}]);