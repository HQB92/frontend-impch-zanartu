"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{5554:function(e,a,l){l.d(a,{RP:function(){return t},a$:function(){return n},zs:function(){return r}});let t=[{value:1,label:"Za\xf1artu"},{value:2,label:"Oro Verde"},{value:3,label:"El Parron"},{value:4,label:"La Hermosa"},{value:5,label:"Malloa Norte"},{value:6,label:"Malloa Sur"},{value:7,label:"Huape"},{value:8,label:"Quinchamali"},{value:9,label:"Confluencia"}],n=[{value:"Soltero(a)",label:"Soltero(a)"},{value:"Casado(a)",label:"Casado(a)"},{value:"Divorciado(a)",label:"Divorciado(a)"},{value:"Viudo(a)",label:"Viudo(a)"}],r=[{value:"1",label:"Activo"},{value:"2",label:"No Activo"},{value:"3",label:"Transferido"},{value:"4",label:"Retirado"},{value:"5",label:"Fallecido"}]},4180:function(e,a,l){l.d(a,{p:function(){return C}});var t=l(5893),n=l(7294),r=l(6242),i=l(8445),s=l(4267),u=l(6822),d=l(6886),o=l(6515),m=l(7109),h=l(431),c=l(7720),x=l(2023),b=l(9417),f=l(5554),p=l(3212),v=l(8884),g=l(319),j=l(3785),Z=l(7312),P=l(1163);let C=e=>{let[a,l]=(0,n.useState)({rut:"",names:"",lastNameMom:"",lastNameDad:"",dateOfBirth:"",probationStartDate:null,fullMembershipDate:null,email:"",mobile:"",telephone:"",address:"",churchId:"",maritalStatus:"",statusId:"",sexo:""}),[C,{data:D,loading:M,error:$}]=(0,g.D)(v.$Z),[S,{data:E,loading:I,error:W}]=(0,g.D)(v.rn),w=(0,P.useRouter)();(0,n.useEffect)(()=>{(null==e?void 0:e.dataEdit)&&l({...e.dataEdit,dateOfBirth:k(e.dataEdit.dateOfBirth),probationStartDate:k(e.dataEdit.probationStartDate),fullMembershipDate:k(e.dataEdit.fullMembershipDate)})},[null==e?void 0:e.dataEdit]),(0,n.useEffect)(()=>{a.rut&&_()},[a.rut]),(0,n.useEffect)(()=>{(D||E)&&setTimeout(()=>{w.push("/members")},3e3)},[D,E]);let N=e=>{console.log(e);let{name:a,value:t}=e.target;l(e=>({...e,[a]:t}))},_=()=>{(0,p.fW)(a.rut)&&l(e=>({...e,rut:(0,p.t2)(a.rut,p.io.DOTS_DASH)}))},F=e=>e.toLowerCase().replace(/(?:^|\s)([a-zñ])/g,e=>e.toUpperCase()).replace(/ñ/g,"\xd1"),k=e=>e&&"null"!==e?e.split("T")[0]:null;return M||I?(0,t.jsx)(j.Z,{}):D||E?(0,t.jsx)(Z.Z,{severity:"success",children:"Miembro "+(D?"Registrado":"Actualizado")+" Exitosamente"}):$||W?(0,t.jsx)(Z.Z,{severity:"error",children:"Error al "+(D?"registrar":"actualizar")+" miembro"}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("form",{autoComplete:"off",noValidate:!0,onSubmit:l=>{l.preventDefault();let t=e.dataEdit?S:C;t({variables:{member:{...a}}})},children:(0,t.jsxs)(r.Z,{children:[(0,t.jsx)(i.Z,{subheader:"La informaci\xf3n que puedes editar",title:"Mis Datos"}),(0,t.jsx)(s.Z,{sx:{pt:0},children:(0,t.jsx)(u.Z,{sx:{m:-1.5},children:(0,t.jsxs)(d.ZP,{container:!0,spacing:4,children:[(0,t.jsx)(d.ZP,{item:!0,xs:12,md:2,children:(0,t.jsx)(o.Z,{fullWidth:!0,label:"Rut",name:"rut",value:a.rut,onChange:N,helperText:a.rut.length>=7&&!(0,p.fW)(a.rut)&&"rut invalid",error:a.rut.length>=7&&!(0,p.fW)(a.rut),required:!0,disabled:!!(null==e?void 0:e.dataEdit)})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(o.Z,{fullWidth:!0,label:"Nombre",name:"names",required:!0,onChange:e=>l(a=>({...a,names:F(e.target.value)})),value:a.names})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:3,children:(0,t.jsx)(o.Z,{fullWidth:!0,label:"Apellido Paterno",name:"lastNameDad",required:!0,onChange:e=>l(a=>({...a,lastNameDad:F(e.target.value)})),value:a.lastNameDad})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:3,children:(0,t.jsx)(o.Z,{fullWidth:!0,label:"Apellido Materno",name:"lastNameMom",required:!0,onChange:e=>l(a=>({...a,lastNameMom:F(e.target.value)})),value:a.lastNameMom})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:3,children:(0,t.jsx)(o.Z,{fullWidth:!0,InputLabelProps:{shrink:!0},name:"dateOfBirth",label:"Fecha de Nacimiento",type:"date",required:!0,onChange:N,value:a.dateOfBirth})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:3,children:(0,t.jsx)(o.Z,{fullWidth:!0,InputLabelProps:{shrink:!0},name:"probationStartDate",label:"Fecha Miembro Probando",type:"date",onChange:N,value:a.probationStartDate})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:3,children:(0,t.jsx)(o.Z,{fullWidth:!0,InputLabelProps:{shrink:!0},name:"fullMembershipDate",label:"Fecha Plena comuni\xf3n",type:"date",onChange:N,value:a.fullMembershipDate})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:3,children:(0,t.jsx)(o.Z,{fullWidth:!0,label:"Tel\xe9fono M\xf3vil",name:"mobile",InputProps:{startAdornment:(0,t.jsxs)(m.Z,{position:"start",children:[(0,t.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/7/78/Flag_of_Chile.svg",alt:"Chile Flag",style:{height:15,marginRight:2}}),"+56"]})},error:!!(a.mobile&&9!==a.mobile.length),helperText:a.mobile&&9!==a.mobile.length&&"El n\xfamero debe tener 9 d\xedgitos",onChange:N,value:a.mobile})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:3,children:(0,t.jsx)(o.Z,{fullWidth:!0,label:"Tel\xe9fono Fijo",name:"telephone",InputProps:{startAdornment:(0,t.jsxs)(m.Z,{position:"start",children:[(0,t.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/7/78/Flag_of_Chile.svg",alt:"Chile Flag",style:{height:15,marginRight:2}}),"+56"]})},onChange:N,value:a.telephone})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(o.Z,{fullWidth:!0,label:"Email",name:"email",required:!0,onChange:N,value:a.email})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:5,children:(0,t.jsx)(o.Z,{fullWidth:!0,label:"Direcci\xf3n",name:"address",onChange:e=>l(a=>({...a,address:F(e.target.value)})),value:a.address})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:3,children:(0,t.jsx)(o.Z,{fullWidth:!0,label:"Iglesia",name:"churchId",select:!0,required:!0,onChange:N,value:a.churchId,children:f.RP.map(e=>(0,t.jsx)(h.Z,{value:e.value,children:e.label},e.value))})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:3,children:(0,t.jsx)(o.Z,{fullWidth:!0,label:"Estado Civil",name:"maritalStatus",select:!0,required:!0,onChange:N,value:a.maritalStatus,children:f.a$.map(e=>(0,t.jsx)(h.Z,{value:e.value,children:e.label},e.value))})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:3,children:(0,t.jsxs)(o.Z,{fullWidth:!0,label:"Sexo",name:"sexo",select:!0,required:!0,onChange:N,value:a.sexo,children:[(0,t.jsx)(h.Z,{value:"Masculino",children:"Masculino"},"M"),(0,t.jsx)(h.Z,{value:"Femenino",children:"Femenino"},"F")]})}),(0,t.jsx)(d.ZP,{item:!0,xs:12,md:3,children:(0,t.jsx)(o.Z,{fullWidth:!0,label:"Estado",name:"statusId",select:!0,required:!0,onChange:N,value:a.statusId,children:f.zs.map(e=>(0,t.jsx)(h.Z,{value:e.value,children:e.label},e.value))})})]})})}),(0,t.jsx)(c.Z,{}),(0,t.jsx)(x.Z,{sx:{justifyContent:"flex-end"},children:(0,t.jsx)(b.Z,{type:"submit",variant:"contained",children:"Guardar"})})]})})})}},8884:function(e,a,l){l.d(a,{$Z:function(){return o},aO:function(){return m},oj:function(){return c},rn:function(){return h}});var t=l(2729),n=l(3357);function r(){let e=(0,t._)(["\n    mutation Create($member: MemberInput!) {\n  Member {\n    create(member: $member) {\n      code\n      message\n    }\n  }\n}\n\n"]);return r=function(){return e},e}function i(){let e=(0,t._)(["\n    mutation Update($updateId: ID!, $rut: ID!, $username: String, $email: String, $password: String) {\n  User {\n    update(id: $updateId, rut: $rut, username: $username, email: $email, password: $password) {\n      code\n      message\n    }\n  }\n}"]);return i=function(){return e},e}function s(){let e=(0,t._)(["\nmutation Delete($rut: String!) {\n  Member {\n    delete(rut: $rut) {\n      code\n      message\n    }\n  }\n}"]);return s=function(){return e},e}function u(){let e=(0,t._)(["\nmutation Update($member: MemberInput!) {\n    Member {\n        update(member: $member) {\n        code\n        message\n        }\n    }\n}"]);return u=function(){return e},e}function d(){let e=(0,t._)(["\nmutation ChangePassword($id: ID!, $password: String!) {\n  User {\n    changePassword(id: $id, password: $password) {\n      code\n      message\n    }\n  }\n}"]);return d=function(){return e},e}let o=(0,n.Ps)(r());(0,n.Ps)(i());let m=(0,n.Ps)(s()),h=(0,n.Ps)(u()),c=(0,n.Ps)(d())}}]);